<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/css/sidebar-menu.css" />
    <link rel="stylesheet" href="/css/home.css" />
    <link
      href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css"
      rel="stylesheet"
    />
    <script src="https://kit.fontawesome.com/86589e81fc.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/sidebar-menu.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
   
    <%- include('../views/partials/sidebar-menu'); %>

    <section class="home-section">
      <div class="text">Users</div>
        <div class="container-fluid">
          <div class="row h-100">
            <div class="col-4 p-5">
              <h2 class="text-center">Authorize user</h2>
                <form action="/admin/users" method="post">
                  <p>Credentials:</p>
                  <div class="form-group first">
                    <input type="text" placeholder="Responsible's name" class="form-control" name="username" required>
                  </div>
                  <br>
                  <div class="form-group first">
                    <input type="text" placeholder="Email" class="form-control" name="email" required>
                  </div>
                  <br>
                  <div class="form-group first">
                    <input type="text" placeholder="DNI" class="form-control" name="dni" required>
                  </div>
                  <br>
                  <div class="form-group last mb-4">
                    <input id="password" type="password" placeholder="Password" class="form-control" name="password" required>
                  </div>
                  <div class="form-group last mb-4">
                    <input type="password" placeholder="Repeat Password" class="form-control" name="passwordrpt" required>
                  </div>
                  <div class="form-group last mb-4">
                    <input type="password" placeholder="Entity ID" class="form-control" name="entity_id" required>
                  </div>
                  <div class="row d-flex mb-4">
                    <div class="col d-block">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="workshop" name="workshop_rol" id="flexCheckIndeterminateDisabled">
                        <label class="form-check-label" for="flexCheckDefault">
                          Workshop
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="owner" name="owner_rol" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                          Owner
                        </label>
                      </div>
                    </div>
                   
                  </div>
                  <button type="submit" class="btn btn-primary">Submit</button>

              </form>
              <% if (error) { %>
                <div class="alert alert-danger" role="alert">
                  <%= msg%>
                </div>
              <% } %>
              <% if (registered) { %>
                <div class="alert alert-success" role="alert">
                  <%= msg%>
                </div>
              <% } %>
            </div>
            <div class="col-8 p-5">
              <h2 class="text-center">All</h2>
              <% if (users.length > 0) { %>
                <% users.forEach(function(w){ %>
                  <div class="card row-hover pos-relative py-3 px-3 mb-3  border-top-1 border-right-1 border-bottom-1 rounded-1" style="box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;">
                    <div class="row align-items-center">
                      <div class="col-3">
                        <h5 class="">
                          <i class="fa-solid fa-user"></i>
                                                    
                        </h5>
                      </div>
                      <div class="col-9">
                        <div class="row">
                          <div class="col-6">

                          <span href="/" class="mx-2">ID: <%= w.id%></span>
                          <br>
                          <span href="/" class="mx-2">ID Chain: <%= w.id_chain%></span>
                          <br>
                          <span href="/" class="mx-2">DNI: <%= w.dni%></span>
                          <br>
                          <span href="/" class="mx-2">Entity ID: <%= w.entity_id%></span>
                          <br>
                          <span href="/" class="mx-2">Rol: <%= w.rol%></span>
                          <br>
                          </div>
                          <div class="col-6">
                          <span href="/" class="mx-2">Email: <%= w.email%></span>                          
                          <br>
                          <span href="/" class="mx-2">Username: <%= w.username%></span>
                          <br>
                          <span href="/" class="mx-2">Active: <%= w.active%></span>
                          <br>
                          </div>
                        </div>
                      
                      </div>
                      
                    </div>
                  </div>
                      
                <% }); %>
              <%} else { %>
                <div class="row">
                  <% if (msg === undefined) { %>
                    <h3 class="text-center" >No hay talleres...</h3>
                  <%} else { %>
                    <h3 class="text-center" ><%= msg %></h3>
                  <% } %>
                </div>
              <% } %>
            </div>
            
        </div>
       

    </section>
    
    <script src="/js/sidebar-animation.js"></script>

  </body>
</html>
